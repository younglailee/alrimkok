/*!
 * sMenu - v0.2.1 - 2016-11-11
 * Copyright (c) 2016 Alpha-Edu(alpha@alpha-edu.co.kr)
 */
(function(e){e.sMenu={version:"0.2.1",curr:0};e.fn.sMenu=function(m){var a=e.extend(!0,{},e.fn.sMenu.defaults,m);this.each(function(){for(var f=e(this),h=e("ul",f),r=e("> li",h),g=e("> a",r),n=3,k=null,p={off:[],on:[],hover:[]},h="> ul > li",q=1;q<=n;q++){var m=e(h,f);if(0<m.length)m.addClass(a.depth_class+"-"+q),h+="> ul > li";else{n=q-1;break}}var t=function(d){for(var b=0,c=1;c<=n;c++)if(d.hasClass(a.depth_class+"-"+c)){b=c;break}return b},u=function(){for(var d="",b=1;b<=n;b++){var c=0;"1"==b?
c=a.on_menu1:"2"==b?c=a.on_menu2:"3"==b&&(c=a.on_menu3);--c;if(-1<c)d+="> ul > li:eq("+c+")",e(d,f).addClass(a.on_class);else break}if(a.flag_use_img)for(d=g.length,b=0;b<d;b++)g.eq(b).parent("li").hasClass(a.on_class)?l(g.eq(b).find("> img"),"on"):l(g.eq(b).find("> img"),"off");a.onCall()},l=function(a,b){var c=[],c=a.attr("class").split("img_arr_"),c=c[1].split(" "),e=c[0],c=a.attr("src"),e=p[b][e];c!=e&&a.attr("src",e)},v=function(d){var b=t(d);if(0<b){var c=d.siblings("li").find("li").andSelf();
c.removeClass(a.hover_class);d.addClass(a.hover_class);if(a.flag_use_img){for(var e=c.length,f=0;f<e;f++)c.eq(f).hasClass(a.on_class)?l(c.eq(f).find("> a > img"),"on"):l(c.eq(f).find("> a > img"),"off");l(d.find("> a > img"),"hover")}}a.hoverCall(d,b)},w=function(){f.removeClass(a.open_class);a.closeCall();r.removeClass(a.hover_class);u();clearTimeout(k)};a.flag_use_img&&function(){for(var d=g.length,b=0;b<d;b++){var c=g.eq(b).find("> img").addClass("img_arr_"+b).attr("src"),e=c.lastIndexOf(".");
p.off[b]=c;var f=c.substring(0,e),c=c.substring(e,c.length);p.on[b]=f+a.on_suffix+c;p.hover[b]=f+a.hover_suffix+c}}();g.on("click",function(d){var b=!1;if(a.is_snb||a.is_responsive&&1*e(document).width()<=1*a.mobile_width)b=!0;b&&(b=e(this).parent("li"),b.hasClass(a.hover_class)?(b.removeClass(a.hover_class),2>t(b)&&(f.removeClass(a.open_class),a.closeCall(),clearTimeout(k))):(v(b),f.hasClass(a.open_class)||(f.addClass(a.open_class),a.openCall()),clearTimeout(k)),0<b.find("ul").length&&d.preventDefault())}).on("mouseenter focusin",
function(d){d=!0;if(a.is_snb||a.is_responsive&&1*e(document).width()<=1*a.mobile_width)d=!1;d&&(f.hasClass(a.open_class)||(f.addClass(a.open_class),a.openCall()),v(e(this).parent("li")),clearTimeout(k))});f.on("mouseleave",function(d){d=!0;if(a.is_snb||a.is_responsive&&1*e(document).width()<=1*a.mobile_width)d=!1;d&&w()});g.filter(":eq(0), :eq(-1)").on("focusout",function(d){d=!0;if(a.is_snb||a.is_responsive&&1*e(document).width()<=1*a.mobile_width)d=!1;d&&(k=setTimeout(function(){w()},100))});r.removeClass(a.hover_class);
u()});return this};e.fn.sMenu.defaults={open_class:"open",on_class:"on",hover_class:"on",depth_class:"depth",flag_use_img:!1,on_suffix:"_on",hover_suffix:"_on",hoverCall:function(e,a){},onCall:function(){},openCall:function(){},closeCall:function(){},on_menu1:0,on_menu2:0,on_menu3:0,is_snb:!1,is_responsive:!1,mobile_width:768}})(jQuery);
